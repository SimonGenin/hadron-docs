{"version":3,"sources":["webpack:///path---tutorial-main-second-c867f2a629add9ddc9a2.js","webpack:///./.cache/json/tutorial-main-second.json"],"names":["webpackJsonp","329","module","exports","data","markdownRemark","html","pathContext","relativePath"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,qoiBAAyujBC,aAAgBC,aAAA","file":"path---tutorial-main-second-c867f2a629add9ddc9a2.js","sourcesContent":["webpackJsonp([109902771560734],{\n\n/***/ 329:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2 id=\\\"connecting-hadron-to-a-mysql-database-with-typeorm\\\"><a href=\\\"#connecting-hadron-to-a-mysql-database-with-typeorm\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Connecting hadron to a MySQL database with TypeORM</h2>\\n<p>First let's create <code class=\\\"language-text\\\">User</code> and <code class=\\\"language-text\\\">Role</code> schemas for our database.</p>\\n<p>We are going to create a <code class=\\\"language-text\\\">src/schemas</code> directory and create <code class=\\\"language-text\\\">User.js</code> and <code class=\\\"language-text\\\">Role.js</code> there.</p>\\n<p><strong>User schema</strong>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// src/schemas/User.js</span>\\n<span class=\\\"token keyword\\\">const</span> userSchema <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'User'</span><span class=\\\"token punctuation\\\">,</span>\\n    columns<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            primary<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"int\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            generated<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        username<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"varchar\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            unique<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        passwordHash<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"varchar\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        addedOn<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'timestamp'</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    relations<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        roles<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            target<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Role\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"many-to-many\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            joinTable<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'user_role'</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> userSchema<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><strong>Role schema</strong>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// src/schemas/Role.js</span>\\n<span class=\\\"token keyword\\\">const</span> roleSchema <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Role'</span><span class=\\\"token punctuation\\\">,</span>\\n    columns<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            primary<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'int'</span><span class=\\\"token punctuation\\\">,</span>\\n            generated<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'varchar'</span><span class=\\\"token punctuation\\\">,</span>\\n            unique<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        addedOn<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'timestamp'</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> roleSchema<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we can try to put these tables in our database, but before that, we need to install MySQL and create a database.</p>\\n<p>We recommend using Docker to install MySQL:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD<span class=\\\"token operator\\\">=</span>my-secret-pw -d -p 3306:3306 mysql</code></pre>\\n      </div>\\n<p>Now we can connect to our database with a database managment application, like PhpMyAdmin or Sequel, with this config:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">host: 127.0.0.1\\nusername: root\\npassword: my-secret-pw</code></pre>\\n      </div>\\n<p>In there we need to create a new database, for example let's create one named <code class=\\\"language-text\\\">hadron-todo-app</code>.</p>\\n<p>When we have met the requirements, we can init <strong>hadron-typeorm</strong>. First, we need to install the hadron-typeorm module and mysql dependency:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save @brainhubeu/hadron-typeorm mysql</code></pre>\\n      </div>\\n<p>Secondly, we need to prepare a configuration file (in src/config/db.js):</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// src/config/db.js</span>\\n<span class=\\\"token keyword\\\">import</span> userSchema <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'../schemas/User'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> roleSchema <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'../schemas/Role'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> connection <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'mysql-connection'</span><span class=\\\"token punctuation\\\">,</span>\\n  type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'mysql'</span><span class=\\\"token punctuation\\\">,</span>\\n  host<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'localhost'</span><span class=\\\"token punctuation\\\">,</span>\\n  port<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3306</span><span class=\\\"token punctuation\\\">,</span>\\n  username<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'root'</span><span class=\\\"token punctuation\\\">,</span>\\n  password<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'my-secret-pw'</span><span class=\\\"token punctuation\\\">,</span>\\n  database<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'todo-app'</span><span class=\\\"token punctuation\\\">,</span>\\n  entitySchemas<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>roleSchema<span class=\\\"token punctuation\\\">,</span> userSchema<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n  synchronize<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n    connection<span class=\\\"token punctuation\\\">,</span>\\n    entities<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>roleSchema<span class=\\\"token punctuation\\\">,</span> userSchema<span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Where we have added our ready schemas.</p>\\n<p>Finally, we need to pass our config to the hadron configuration, so we need to import the database configuration from <code class=\\\"language-text\\\">src/config/db.js</code> back in our <code class=\\\"language-text\\\">src/index.js</code>.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">import</span> db <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./config/db.js'</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Add the database configuration to the Hadron configuration:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">const</span> config <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token operator\\\">...</span>db<span class=\\\"token punctuation\\\">,</span>\\n    routes<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        helloWorldRoute<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span>\\n            methods<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'GET'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n            callback<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> status<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">,</span> body<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span> message<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Hello World'</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>And add hadron-typeorm module to hadron:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">as</span> hadronExpress <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'@brainhubeu/hadron-express'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">as</span> hadronTypeOrm <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'@brainhub/hadron-typeorm'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// ...</span>\\n\\n<span class=\\\"token keyword\\\">const</span> hadronInit <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">async</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> container <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> <span class=\\\"token function\\\">hadron</span><span class=\\\"token punctuation\\\">(</span>expressApp<span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">[</span>hadronExpress<span class=\\\"token punctuation\\\">,</span> hadronTypeOrm<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        config<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now when we run the server, we should see new empty tables in the database which have values from our schemas:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-00927.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 62.61879619852165%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiElEQVQ4y62T206DQBCGef8bb/QljIl6YWysVkMPthYL7R5KC8hSCErERJMW2kLyC2swqSZq1Ys/M8nOfnPIjDL1LXjCR3gf4T4MYE8G0MgE/VsCg3CY3ICuNdFst2FZllQQBPB9H7PZDFEUwTRN1Otn6HRUKLbJwMkAzpRL9XttNNQO+poObWBgaNxCu2mh2+tBCAHHcSTUtm2p0td1HbXaKVqtArh72MfeyQQ7RxTH13eI4xjRw0NhH/FU+HH8hCRJkaYpVqsV1uu19EuVfqX5fI7lcgVlv67hUB3j4IqhQzzkeSYDys8VIM8yZN8oz3NpFceawLZMTE2OwPfeYVXmCvxTKYQyUDbGiDC4xYyybBO4rRTKGBgfgxAqh/6bqjYqpJxL4KgAusL7O3A4IkXLHGXrQnye4dYtn180oDZbMIYjeN4/ABuXKnRjCErpRoW/bvm0Vsd1tyuBruvKXfqY9SegKk5hxfzKWxTCRRiG8gKSJMHL84vc/rcLWH4JS4v3xWIh414Bg2XT2MnNz2YAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"New tables in database\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-7a630.png\\\"\\n        srcset=\\\"/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-46d37.png 150w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-c218a.png 300w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-7a630.png 600w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-91b84.png 900w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-b8f57.png 1200w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-6f30d.png 1800w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-00927.png 1894w\\\"\\n        sizes=\\\"(max-width: 600px) 100vw, 600px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\"}},\"pathContext\":{\"relativePath\":\"GDK>../docs/tutorial/main/Second.md\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---tutorial-main-second-c867f2a629add9ddc9a2.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2 id=\\\"connecting-hadron-to-a-mysql-database-with-typeorm\\\"><a href=\\\"#connecting-hadron-to-a-mysql-database-with-typeorm\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Connecting hadron to a MySQL database with TypeORM</h2>\\n<p>First let's create <code class=\\\"language-text\\\">User</code> and <code class=\\\"language-text\\\">Role</code> schemas for our database.</p>\\n<p>We are going to create a <code class=\\\"language-text\\\">src/schemas</code> directory and create <code class=\\\"language-text\\\">User.js</code> and <code class=\\\"language-text\\\">Role.js</code> there.</p>\\n<p><strong>User schema</strong>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// src/schemas/User.js</span>\\n<span class=\\\"token keyword\\\">const</span> userSchema <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'User'</span><span class=\\\"token punctuation\\\">,</span>\\n    columns<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            primary<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"int\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            generated<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        username<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"varchar\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            unique<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        passwordHash<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"varchar\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        addedOn<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'timestamp'</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    relations<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        roles<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            target<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Role\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"many-to-many\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            joinTable<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'user_role'</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> userSchema<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><strong>Role schema</strong>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// src/schemas/Role.js</span>\\n<span class=\\\"token keyword\\\">const</span> roleSchema <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Role'</span><span class=\\\"token punctuation\\\">,</span>\\n    columns<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        id<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            primary<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'int'</span><span class=\\\"token punctuation\\\">,</span>\\n            generated<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'varchar'</span><span class=\\\"token punctuation\\\">,</span>\\n            unique<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        addedOn<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'timestamp'</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> roleSchema<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we can try to put these tables in our database, but before that, we need to install MySQL and create a database.</p>\\n<p>We recommend using Docker to install MySQL:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD<span class=\\\"token operator\\\">=</span>my-secret-pw -d -p 3306:3306 mysql</code></pre>\\n      </div>\\n<p>Now we can connect to our database with a database managment application, like PhpMyAdmin or Sequel, with this config:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">host: 127.0.0.1\\nusername: root\\npassword: my-secret-pw</code></pre>\\n      </div>\\n<p>In there we need to create a new database, for example let's create one named <code class=\\\"language-text\\\">hadron-todo-app</code>.</p>\\n<p>When we have met the requirements, we can init <strong>hadron-typeorm</strong>. First, we need to install the hadron-typeorm module and mysql dependency:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save @brainhubeu/hadron-typeorm mysql</code></pre>\\n      </div>\\n<p>Secondly, we need to prepare a configuration file (in src/config/db.js):</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// src/config/db.js</span>\\n<span class=\\\"token keyword\\\">import</span> userSchema <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'../schemas/User'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> roleSchema <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'../schemas/Role'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> connection <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'mysql-connection'</span><span class=\\\"token punctuation\\\">,</span>\\n  type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'mysql'</span><span class=\\\"token punctuation\\\">,</span>\\n  host<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'localhost'</span><span class=\\\"token punctuation\\\">,</span>\\n  port<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3306</span><span class=\\\"token punctuation\\\">,</span>\\n  username<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'root'</span><span class=\\\"token punctuation\\\">,</span>\\n  password<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'my-secret-pw'</span><span class=\\\"token punctuation\\\">,</span>\\n  database<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'todo-app'</span><span class=\\\"token punctuation\\\">,</span>\\n  entitySchemas<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>roleSchema<span class=\\\"token punctuation\\\">,</span> userSchema<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n  synchronize<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n    connection<span class=\\\"token punctuation\\\">,</span>\\n    entities<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>roleSchema<span class=\\\"token punctuation\\\">,</span> userSchema<span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Where we have added our ready schemas.</p>\\n<p>Finally, we need to pass our config to the hadron configuration, so we need to import the database configuration from <code class=\\\"language-text\\\">src/config/db.js</code> back in our <code class=\\\"language-text\\\">src/index.js</code>.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">import</span> db <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./config/db.js'</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Add the database configuration to the Hadron configuration:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">const</span> config <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token operator\\\">...</span>db<span class=\\\"token punctuation\\\">,</span>\\n    routes<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        helloWorldRoute<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n            path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span>\\n            methods<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'GET'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n            callback<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> status<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">,</span> body<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span> message<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Hello World'</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>And add hadron-typeorm module to hadron:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"javascript\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">as</span> hadronExpress <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'@brainhubeu/hadron-express'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">as</span> hadronTypeOrm <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'@brainhub/hadron-typeorm'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// ...</span>\\n\\n<span class=\\\"token keyword\\\">const</span> hadronInit <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">async</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> container <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> <span class=\\\"token function\\\">hadron</span><span class=\\\"token punctuation\\\">(</span>expressApp<span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">[</span>hadronExpress<span class=\\\"token punctuation\\\">,</span> hadronTypeOrm<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        config<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now when we run the server, we should see new empty tables in the database which have values from our schemas:</p>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-00927.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 62.61879619852165%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiElEQVQ4y62T206DQBCGef8bb/QljIl6YWysVkMPthYL7R5KC8hSCErERJMW2kLyC2swqSZq1Ys/M8nOfnPIjDL1LXjCR3gf4T4MYE8G0MgE/VsCg3CY3ICuNdFst2FZllQQBPB9H7PZDFEUwTRN1Otn6HRUKLbJwMkAzpRL9XttNNQO+poObWBgaNxCu2mh2+tBCAHHcSTUtm2p0td1HbXaKVqtArh72MfeyQQ7RxTH13eI4xjRw0NhH/FU+HH8hCRJkaYpVqsV1uu19EuVfqX5fI7lcgVlv67hUB3j4IqhQzzkeSYDys8VIM8yZN8oz3NpFceawLZMTE2OwPfeYVXmCvxTKYQyUDbGiDC4xYyybBO4rRTKGBgfgxAqh/6bqjYqpJxL4KgAusL7O3A4IkXLHGXrQnye4dYtn180oDZbMIYjeN4/ABuXKnRjCErpRoW/bvm0Vsd1tyuBruvKXfqY9SegKk5hxfzKWxTCRRiG8gKSJMHL84vc/rcLWH4JS4v3xWIh414Bg2XT2MnNz2YAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"New tables in database\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-7a630.png\\\"\\n        srcset=\\\"/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-46d37.png 150w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-c218a.png 300w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-7a630.png 600w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-91b84.png 900w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-b8f57.png 1200w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-6f30d.png 1800w,\\n/static/new-tables-1fcfe36831257f945023d7f13a0c10a7-00927.png 1894w\\\"\\n        sizes=\\\"(max-width: 600px) 100vw, 600px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\"}},\"pathContext\":{\"relativePath\":\"GDK>../docs/tutorial/main/Second.md\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/tutorial-main-second.json\n// module id = 329\n// module chunks = 109902771560734"],"sourceRoot":""}